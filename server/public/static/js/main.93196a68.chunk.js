(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{110:function(e,t){},114:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(58),c=n.n(r),i=(n(66),n(19)),u=n(20),o=n(23),s=n(22),m=(n(67),n(18)),d=n(1),E=function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"Codebreaker!"))},h=n(31),f=n.n(h);f.a.defaults.proxy={host:"localhost",port:3001};var p=function(){var e=Object(d.f)();return l.a.createElement("button",{onClick:function(){f.a.get("/new").then((function(t){e.push("/game/".concat(t.data))})).catch((function(e){return console.error(e)}))}},"Start New Game")},v=n(34),b=function(e){var t=e.players;return l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{colSpan:2},"Players")),l.a.createElement("tr",null,l.a.createElement("th",null,"ID"),l.a.createElement("th",null,"Name"))),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,e.id),l.a.createElement("td",null,e.name))}))))},y=function(e){var t=e.players.find((function(t){return t.id===e.myId}));if(void 0===t)throw new Error("Me no exist");var n=e.players.length>3&&e.players.every((function(e){return""!==e.name}));return l.a.createElement("div",null,l.a.createElement("h3",null,"Waiting for players to join..."),l.a.createElement("p",null,"Game link:",l.a.createElement("input",{disabled:!0,value:"http://localhost:3000/lobby/1",style:{width:"300px"}})),l.a.createElement("p",null,"Please enter your name:"," ",l.a.createElement("input",{value:t.name,onChange:function(t){return e.onNameChange(t.target.value)}})),l.a.createElement(b,{players:e.players}),l.a.createElement("button",{disabled:!n,onClick:e.onGameStart},"Start the Game!"))},g=n(60),k=n.n(g),S=function(e){var t=e.cypher;return l.a.createElement("div",null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{colSpan:4},"Your team's cypher"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"1"),l.a.createElement("td",null,"2"),l.a.createElement("td",null,"3"),l.a.createElement("td",null,"4")),l.a.createElement("tr",null,l.a.createElement("td",null,t[0]),l.a.createElement("td",null,t[1]),l.a.createElement("td",null,t[2]),l.a.createElement("td",null,t[3])))))},w=function(e){var t=e.turns.map((function(e){var t=e.code,n=[t.findIndex((function(e){return 1===e})),t.findIndex((function(e){return 2===e})),t.findIndex((function(e){return 3===e})),t.findIndex((function(e){return 4===e}))];return[-1!==n[0]?e.transmission[n[0]]:"",-1!==n[1]?e.transmission[n[1]]:"",-1!==n[2]?e.transmission[n[2]]:"",-1!==n[3]?e.transmission[n[3]]:""]}));return l.a.createElement("div",null,l.a.createElement("h4",null,"Team transmission history"),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,"1"),l.a.createElement("td",null,"2"),l.a.createElement("td",null,"3"),l.a.createElement("td",null,"4"))),l.a.createElement("tbody",null,t.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,e[0]),l.a.createElement("td",null,e[1]),l.a.createElement("td",null,e[2]),l.a.createElement("td",null,e[3]))})))))},T=n(7),I=function(e){var t=e.code,n=e.onSend,r=Object(a.useState)(""),c=Object(T.a)(r,2),i=c[0],u=c[1],o=Object(a.useState)(""),s=Object(T.a)(o,2),m=s[0],d=s[1],E=Object(a.useState)(""),h=Object(T.a)(E,2),f=h[0],p=h[1];return l.a.createElement("div",null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3},"Code:"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,t[0]),l.a.createElement("td",null,t[1]),l.a.createElement("td",null,t[2])),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("input",{onChange:function(e){return u(e.target.value)}})),l.a.createElement("td",null,l.a.createElement("input",{onChange:function(e){return d(e.target.value)}})),l.a.createElement("td",null,l.a.createElement("input",{onChange:function(e){return p(e.target.value)}}))),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3},l.a.createElement("button",{id:"send",onClick:function(){return n([i,m,f])}},"Send"))))))},C=function(e){var t=e.transmission,n=e.onGuess,r=Object(a.useState)(void 0),c=Object(T.a)(r,2),i=c[0],u=c[1],o=Object(a.useState)(void 0),s=Object(T.a)(o,2),m=s[0],d=s[1],E=Object(a.useState)(void 0),h=Object(T.a)(E,2),f=h[0],p=h[1],v=function(e){return function(t){var n=Number(t.target.value);isNaN(n)?e(void 0):e(n)}},b=function(e){return void 0!==e&&(e>0&&e<=4)},y=b(i)&&b(m)&&b(f);return l.a.createElement("div",null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3},"Transmission:"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,t[0]),l.a.createElement("td",null,t[1]),l.a.createElement("td",null,t[2])),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("input",{onChange:v(u)})),l.a.createElement("td",null,l.a.createElement("input",{onChange:v(d)})),l.a.createElement("td",null,l.a.createElement("input",{onChange:v(p)}))),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3},l.a.createElement("button",{id:"send",disabled:!y,onClick:function(){n([i,m,f])}},"Send"))))))},G=function(e){var t=e.code,n=e.transmission;return l.a.createElement("div",null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3},"Sent Transmission:"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,t[0]),l.a.createElement("td",null,t[1]),l.a.createElement("td",null,t[2])),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("input",{disabled:!0,value:n[0]})),l.a.createElement("td",null,l.a.createElement("input",{disabled:!0,value:n[1]})),l.a.createElement("td",null,l.a.createElement("input",{disabled:!0,value:n[2]}))))))},O=function(){return l.a.createElement("div",null,"Waiting for transmission...")},j=function(e){var t=e.guess,n=e.transmission;return l.a.createElement("div",null,l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",{colSpan:3},"Guess Submitted:"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,n[0]),l.a.createElement("td",null,n[1]),l.a.createElement("td",null,n[2])),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("input",{disabled:!0,value:t[0]})),l.a.createElement("td",null,l.a.createElement("input",{disabled:!0,value:t[1]})),l.a.createElement("td",null,l.a.createElement("input",{disabled:!0,value:t[2]}))))))},N=function(e){var t,n=e.game,a=e.team,r=e.me,c=e.onTransmit,i=e.onGuess,u=n.history[n.history.length-1],o=u.encryptor===r?void 0===u.transmission?"TRANSMITTING":"TRANSMITTED":void 0===u.transmission?"WAITING":void 0===u.guesses||void 0===u.guesses[a]?"GUESSING":"GUESSED";"TRANSMITTING"===o?t=l.a.createElement(I,{code:u.code,onSend:c}):"TRANSMITTED"===o?t=l.a.createElement(G,{transmission:u.transmission,code:u.code}):"WAITING"===o?t=l.a.createElement(O,null):"GUESSING"===o?t=l.a.createElement(C,{transmission:u.transmission,onGuess:i}):"GUESSED"===o&&(t=l.a.createElement(j,{transmission:u.transmission,guess:u.guesses[a]}));var s=n.history.filter((function(e){return"COMPLETE"===e.type&&e.encryptorTeam===a}));return l.a.createElement("div",null,l.a.createElement("div",null,"You are on the ",a," team!"),l.a.createElement(S,{cypher:n[a].cypher}),t,l.a.createElement(w,{turns:s}))},x=function(e){var t=e.game,n=e.team,a=t.history.filter((function(e){return"COMPLETE"===e.type&&e.encryptorTeam===n}));return l.a.createElement("div",null,l.a.createElement("h3",null,"Other Team History"),l.a.createElement(w,{turns:a}))},M=function(e){var t=e.game;return l.a.createElement("div",null,l.a.createElement("h3",null,"Game Status:"),l.a.createElement("p",null,"Turn: ",Math.floor(t.history.length/2)+1),l.a.createElement("p",null,"Interceptions: (Red: ",t.red.interceptions,") (Blue:"," ",t.blue.interceptions,")"),l.a.createElement("p",null,"Failed Transmissions: (Red: ",t.red.transmission_fails,") (Blue:"," ",t.blue.transmission_fails,")"))},D=function(e){var t=e.game,n=e.myId,a=e.onTransmit,r=e.onTeamGuess,c=t.red.players.find((function(e){return e===n}))?"red":"blue",i="red"===c?"blue":"red";return l.a.createElement("div",null,l.a.createElement(N,{me:n,game:t,team:c,onGuess:function(e){return r(c,e)},onTransmit:a}),l.a.createElement(x,{team:i,game:t}),l.a.createElement(M,{game:t}))},R=function(e){var t=e.winner;return"draw"===t?l.a.createElement("div",null,l.a.createElement("h2",null,"Draw!")):l.a.createElement("div",null,l.a.createElement("h2",null,"The ",t," team has won the game!"))},W=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).socket=void 0,a.state={players:[],myId:"pending",game:"pending"},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.socket=k()(),window.addEventListener("beforeunload",this.componentCleanup),this.socket.on("new player",(function(t){e.setState((function(e){return{players:[].concat(Object(v.a)(e.players),[t])}}))})),this.socket.on("welcome",(function(t){e.setState({myId:t.id})})),this.socket.on("update player",(function(t){var n=e.state.players.filter((function(e){return e.id!==t.id}));e.setState({players:[].concat(Object(v.a)(n),[t])})})),this.socket.on("player left",(function(t){var n=e.state.players.filter((function(e){return e.id!==t.id}));e.setState({players:n})})),this.socket.on("game state",(function(t){e.setState({game:t})}))}},{key:"componentWillUnmount",value:function(){this.componentCleanup(),window.removeEventListener("beforeunload",this.componentCleanup)}},{key:"componentCleanup",value:function(){if(void 0===this.socket)throw new Error("No socket connection when unmounting");this.socket.emit("disconnect"),this.socket.disconnect(),this.socket.close()}},{key:"onNameChange",value:function(e){if(void 0===this.socket)throw new Error("Callback called before socket connection established");this.socket.emit("player name",e)}},{key:"onGameStart",value:function(){if(void 0===this.socket)throw new Error("Callback called before socket connection established");this.socket.emit("start game")}},{key:"onTeamGuess",value:function(e,t){if(void 0===this.socket)throw new Error("Callback called before socket connection established");this.socket.emit("guess",{team:e,guess:t})}},{key:"onTransmit",value:function(e){if(void 0===this.socket)throw new Error("Callback called before socket connection established");this.socket.emit("transmission",e)}},{key:"render",value:function(){var e,t=this;return void 0===this.socket||"pending"===this.state.myId||-1===this.state.players.findIndex((function(e){return e.id===t.state.myId}))||"pending"===this.state.game?e=l.a.createElement("div",null,"Connecting ..."):"LOBBY"===this.state.game.state?e=l.a.createElement(y,{players:this.state.players,myId:this.state.myId,onNameChange:this.onNameChange.bind(this),onGameStart:this.onGameStart.bind(this)}):"RUNNING"===this.state.game.state?e=l.a.createElement(D,{game:this.state.game,players:this.state.players,myId:this.state.myId,onTeamGuess:this.onTeamGuess.bind(this),onTransmit:this.onTransmit.bind(this)}):"FINISHED"===this.state.game.state&&(e=l.a.createElement(R,{winner:this.state.game.winner})),l.a.createElement("div",null,e)}}]),n}(l.a.Component),A=Object(d.g)(W),B=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return l.a.createElement(m.a,null,l.a.createElement(E,null),l.a.createElement(d.c,null,l.a.createElement(d.a,{exact:!0,path:"/"},l.a.createElement(p,null)),l.a.createElement(d.a,{path:"/game/:id"},l.a.createElement(A,null))))}}]),n}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(113);c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},61:function(e,t,n){e.exports=n(114)},66:function(e,t,n){},67:function(e,t,n){}},[[61,1,2]]]);
//# sourceMappingURL=main.93196a68.chunk.js.map